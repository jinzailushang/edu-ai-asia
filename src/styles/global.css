@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
    /* 主色调 - 科技蓝 */
    --primary: #0066FF;
    --primary-dark: #0052CC;
    --primary-light: #3385FF;

    /* 辅助色 - 渐变 */
    --gradient-start: #0066FF;
    --gradient-end: #00D4FF;

    /* 中性色 */
    --gray-50: #F9FAFB;
    --gray-100: #F3F4F6;
    --gray-900: #111827;

    /* 语义色 */
    --success: #10B981;
    --warning: #F59E0B;
    --error: #EF4444;

    /* 触摸目标最小尺寸 */
    --touch-target-min: 44px;
}

@layer base {
    body {
        @apply font-sans text-gray-900;
        /* 防止移动端字体缩放 */
        -webkit-text-size-adjust: 100%;
        text-size-adjust: 100%;
    }

    /* 字体优化 - 使用系统字体栈以提高性能 */
    html {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans SC', 'Noto Sans',
            'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji';
        /* 平滑滚动 */
        scroll-behavior: smooth;
    }

    /* 移动端优化：防止横向滚动 */
    body {
        overflow-x: hidden;
    }
}

/* 性能优化：减少重绘和回流 */
@layer utilities {

    /* GPU 加速的动画 */
    .gpu-accelerated {
        transform: translateZ(0);
        will-change: transform;
    }

    /* 优化的过渡效果 */
    .optimized-transition {
        transition-property: transform, opacity;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* 内容可见性优化 - 用于长列表 */
    .content-visibility-auto {
        content-visibility: auto;
        contain-intrinsic-size: 0 500px;
    }

    /* 移动端触摸目标优化 */
    .touch-target {
        min-width: var(--touch-target-min);
        min-height: var(--touch-target-min);
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }

    /* 移动端友好的间距 */
    .mobile-padding {
        @apply px-4 sm: px-6 lg:px-8;
    }

    /* 响应式文本截断 */
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .line-clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* 移动端优化的卡片间距 */
    .card-grid {
        @apply grid gap-4 sm: gap-6 lg:gap-8;
    }
}

/* 关键 CSS - 首屏渲染优化 */
@layer components {

    /* 骨架屏加载状态 */
    .skeleton {
        @apply animate-pulse bg-gray-200 rounded;
    }

    /* 懒加载图片占位符 */
    .img-placeholder {
        @apply bg-gray-100 animate-pulse;
        aspect-ratio: 16 / 9;
    }

    /* 响应式容器 */
    .responsive-container {
        @apply w-full max-w-7xl mx-auto px-4 sm: px-6 lg:px-8;
    }

    /* 移动端优化的按钮 */
    .btn-mobile {
        @apply touch-target px-6 py-3 text-base sm: text-lg font-semibold rounded-lg transition-all duration-300;
    }

    /* 移动端优化的输入框 */
    .input-mobile {
        @apply w-full px-4 py-3 text-base border rounded-lg focus: ring-2 focus:ring-primary focus:border-transparent;
        min-height: var(--touch-target-min);
    }
}

/* 移动端特定优化 */
@media (max-width: 640px) {

    /* 减少移动端动画以提升性能 */
    .reduce-motion-mobile {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }

    /* 移动端字体大小优化 */
    h1 {
        @apply text-3xl;
    }

    h2 {
        @apply text-2xl;
    }

    /* 移动端间距优化 */
    section {
        @apply py-12;
    }
}

/* 平板设备优化 */
@media (min-width: 641px) and (max-width: 1024px) {

    /* 平板特定样式 */
    .tablet-cols-2 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

/* 触摸设备优化 */
@media (hover: none) and (pointer: coarse) {

    /* 移除悬停效果，使用点击效果 */
    .hover-effect:hover {
        transform: none;
    }

    .hover-effect:active {
        transform: scale(0.98);
    }

    /* 增大触摸目标 */
    a,
    button {
        min-height: var(--touch-target-min);
        min-width: var(--touch-target-min);
    }
}